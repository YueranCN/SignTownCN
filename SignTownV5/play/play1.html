<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <title>手语村</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body, html {
            margin: 0;
            padding: 0;
            overflow: hidden;
            height: 100vh;
            background-image: linear-gradient(to right, #eccdb1, #dbbe94);
        }

        #loading {
            display: flex;
            justify-content: center;
            align-items: center;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: white;
            border-radius: 48px;
            z-index: 1000;
            font-size: 2em;
        }

        .modal-backdrop {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1;
            opacity: 0;
            transition: opacity 0.5s;
        }

        .modal {
            display: none;
            position: fixed;
            width: 74%;
            height: 74%;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.5);
            background: white;
            border: 5px solid black;
            border-radius: 40px;
            z-index: 2;
            opacity: 0;
            transition: transform 0.5s, opacity 0.5s;
        }

        .close-btn {
            position: absolute;
            width: 4vw;
            height: 4vw;
            max-width: 80px;
            max-height: 80px;
            top: 2vw;
            right: 1vw;
            cursor: pointer;
            z-index: 3;
        }

        iframe {
            width: 100%;
            height: 100%;
            border: none;
        }

        .chang-1, .peo-1, .map-1, .map-2, .no-1, .no-2 {
            position: absolute;
            height: auto;
            transition: transform 0.3s ease;
        }

        .chang-1 {
            width: 80%; top: 46%; left: 50%;
            transform: translate(-50%, -50%);
        }
        .peo-1   { width: 6%;  top: 36%; left: 42%; }
        .map-1   { width: 6%;  top: 48%; left: 34%; }
        .map-2   { width: 6%;  top: 72%; left: 66%; }
        .no-1    { width: 4%;  top: 68%; left: 50.5%; }
        .no-2    { width: 4%;  top: 60%; left: 48.5%; }

        .map-1:hover, .map-2:hover { transform: scale(1.2); }

        body { animation: fadeIn 4s ease-out 0s 1; }

        @keyframes fadeIn {
            from { opacity: 0; }
            to   { opacity: 1; }
        }

        @keyframes pulseScale {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.2); }
        }

        .no-1, .no-2 { animation: pulseScale 2s ease-out infinite; }

        .button-left, .button-right {
            position: absolute;
            width: 6vw;
            height: 6vw;
            max-width: 160px;
            max-height: 160px;
            top: 50vh;
            transform: translateY(-50%);
            z-index: 1000;
            border-radius: 50%;
            background-color: #b38b6d;
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 10px;
            transition: transform 0.3s ease;
        }
        .button-left:hover, .button-right:hover {
            background-color: #a47448;
        }
        .arrow {
            border: solid white;
            border-width: 0 3px 3px 0;
            display: inline-block;
            padding: 8px;
        }
        .left-arrow { transform: rotate(135deg); }
        .right-arrow { transform: rotate(-45deg); }

        .button-left { left: 4vw; }
        .button-right { right: 4vw; }

        .button-right:hover { transform: translateY(-50%) scale(1.5); }
    </style>
</head>
<body>

<div id="loading">加载中...</div>

<img src="../images/play/map-1.png" class="chang-1" alt="chang">
<img src="../images/play/people2.png" class="peo-1" alt="peo">
<div class="map-1" id="backModal">
    <p>&nbsp;&nbsp;&nbsp;&nbsp;返回</p>
    <img src="../images/play/map4.png" alt="img">
</div>
<div class="map-2" id="openModal">
    <img src="../images/play/map5.png" alt="img">
    <p>&nbsp;学习手语</p>
</div>

<img src="../images/play/notes1_hover.png" class="no-1" alt="" id="noteImage">
<img src="../images/play/notes2_hover.png" class="no-2" alt="" id="no2Image">

<div class="button-left">
    <div class="arrow left-arrow"></div>
</div>
<div class="button-right" onclick="location.href='play2.html';">
    <div class="arrow right-arrow"></div>
</div>

<div class="modal-backdrop" id="backdrop"></div>
<div class="modal" id="modal">
    <iframe src="../page/page1.html"></iframe>
    <span class="close-btn" id="closeModal">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-x-lg" viewBox="0 0 16 16">
            <path d="M2.293 2.293a1 1 0 0 1 1.414 0L8 6.586l4.293-4.293a1 1 0 1 1 1.414 1.414L9.414 8l4.293 4.293a1 1 0 0 1-1.414 1.414L8 9.414l-4.293 4.293a1 1 0 0 1-1.414-1.414L6.586 8 2.293 3.707a1 1 0 0 1 0-1.414z"/>
        </svg>
    </span>
</div>
<div class="modal" id="modal2">
    <iframe src="../slider/slider1.html"></iframe>
    <span class="close-btn" id="closeModal2">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-x-lg" viewBox="0 0 16 16">
            <path d="M2.293 2.293a1 1 0 0 1 1.414 0L8 6.586l4.293-4.293a1 1 0 1 1 1.414 1.414L9.414 8l4.293 4.293a1 1 0 0 1-1.414 1.414L8 9.414l-4.293 4.293a1 1 0 0 1-1.414-1.414L6.586 8 2.293 3.707a1 1 0 0 1 0-1.414z"/>
        </svg>
    </span>
</div>
<div class="modal" id="modal3">
    <iframe src="../slider/slider2.html"></iframe>
    <span class="close-btn" id="closeModal3">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-x-lg" viewBox="0 0 16 16">
            <path d="M2.293 2.293a1 1 0 0 1 1.414 0L8 6.586l4.293-4.293a1 1 0 1 1 1.414 1.414L9.414 8l4.293 4.293a1 1 0 0 1-1.414 1.414L8 9.414l-4.293 4.293a1 1 0 0 1-1.414-1.414L6.586 8 2.293 3.707a1 1 0 0 1 0-1.414z"/>
        </svg>
    </span>
</div>

<script>
    // 预加载视频和图片资源
    function preloadAssets() {
        const assets = [
            'sign-1/video/zhou_1.mp4',
            'sign-1/video/bz_1.mp4',
            'sign-1/video/mfdf_1.mp4',
            'sign-1/video/dxm_1.mp4',
            'sign-1/video/zzc_1.mp4',
            'sign-1/video/hg_1.mp4',
            'sign-1/video/rjm_1.mp4',
            'sign-1/video/hd_1.mp4',
            'sign-1/video/bjl_1.mp4',
            'sign-1/video/xg_1.mp4',
            'sign-1/icons/zhou.png',
            'sign-1/icons/bz.png',
            'sign-1/icons/mfdf.png',
            'sign-1/icons/dxm.png',
            'sign-1/icons/zzc.png',
            'sign-1/icons/hg.png',
            'sign-1/icons/rjm.png',
            'sign-1/icons/hd.png',
            'sign-1/icons/bjl.png',
            'sign-1/icons/xg.png'
        ];

        let loadedCount = 0;
        const totalAssets = assets.length;

        function onAssetLoad() {
            loadedCount++;
            console.log(`Loaded ${loadedCount} of ${totalAssets}`);
            if (loadedCount === totalAssets) {
                console.log('All assets preloaded');
                document.getElementById('loading').style.display = 'none';
            }
        }

        assets.forEach(asset => {
            let element;
            if (asset.endsWith('.mp4')) {
                element = document.createElement('video');
                element.src = asset;
                element.preload = 'auto';
                element.onloadeddata = onAssetLoad;
                element.onerror = onAssetLoad;
            } else if (asset.endsWith('.png')) {
                element = document.createElement('img');
                element.src = asset;
                element.onload = onAssetLoad;
                element.onerror = onAssetLoad;
            }

            element.style.position = 'absolute';
            element.style.left = '-9999px';
            document.body.appendChild(element);
        });
    }

    document.addEventListener('DOMContentLoaded', preloadAssets);
</script>
<script>
    // 功能函数：打开指定的模态框
    function openModal(modalElement) {
        modalElement.style.display = "block";
        backdrop.style.display = "block";
        setTimeout(function() {
            modalElement.style.transform = "translate(-50%, -50%) scale(1)";
            modalElement.style.opacity = "1";
            backdrop.style.opacity = "1";
        }, 10);
    }

    // 功能函数：关闭指定的模态框
    function closeModal(modalElement) {
        modalElement.style.transform = "translate(-50%, -50%) scale(0.5)";
        modalElement.style.opacity = "0";
        backdrop.style.opacity = "0";
        setTimeout(function() {
            modalElement.style.display = "none";
            backdrop.style.display = "none";
        }, 500);
    }

    // 获取元素
    var modals = [document.getElementById("modal"), document.getElementById("modal2"), document.getElementById("modal3")];
    var closeButtons = [document.getElementById("closeModal"), document.getElementById("closeModal2"), document.getElementById("closeModal3")];
    var openButton = document.getElementById("openModal");
    var noteImage = document.getElementById("noteImage");
    var no2Image = document.getElementById("no2Image");
    var backdrop = document.getElementById("backdrop");
    var backModal = document.getElementById('backModal');

    // 打开模态框的事件监听
    openButton.onclick = function() { openModal(modals[0]); };
    noteImage.onclick = function() { openModal(modals[1]); };
    no2Image.onclick = function() { openModal(modals[2]); };

    // 关闭模态框的事件监听
    closeButtons.forEach(function(button, index) {
        button.onclick = function() { closeModal(modals[index]); };
    });

    // 点击背景遮罩关闭所有模态框
    backdrop.onclick = function() {
        modals.forEach(closeModal);
    };

    // 动态切换人物图片
    document.addEventListener('DOMContentLoaded', function() {
        const image = document.querySelector('.peo-1');
        let currentSrc = 'people2';

        setInterval(() => {
            image.src = currentSrc === 'people2' ? '../images/play/people3.png' : '../images/play/people2.png';
            currentSrc = currentSrc === 'people2' ? 'people3' : 'people2';
        }, 500);
    });

    // 返回手语村
    backModal.onclick = function() {
        window.location.href = '../index.html';
    };
</script>
</body>
</html>